# 股票智能体API调用示例

本目录包含股票智能体API接口的调用示例，帮助开发者快速了解如何与API进行交互。

## 文件说明

- `api_example.py`: 完整的API调用示例脚本，包含所有接口的调用方法

## 如何使用

### 1. 确保API服务已启动

在运行示例脚本之前，请确保股票智能体API服务已在本地启动，默认监听地址为 `http://localhost:8000`。

您可以通过以下命令启动服务：

```bash
# 在项目根目录执行
python main.py
```

### 2. 运行API调用示例

进入示例目录并运行示例脚本：

```bash
# 直接运行
python hengline/example/api_example.py
```

### 3. 选择演示类型

运行脚本后，您可以选择以下两种演示模式：

- **完整演示**（选项1）：执行所有API调用，包括单个智能体分析、综合分析和多股票比较
  - 注意：这个模式可能需要较长时间完成

- **快速演示**（选项2，默认）：仅执行基础API调用，包括健康检查、获取智能体列表和单个智能体分析
  - 这个模式执行速度更快，适合快速测试

## API接口说明

示例脚本中包含了以下API接口的调用示例：

1. **健康检查** (`/health`)
   - 检查API服务是否正常运行

2. **获取智能体列表** (`/agents`)
   - 获取系统中所有可用的智能体信息

3. **单个智能体分析** (`/analyze/agent`)
   - 使用指定的单个智能体进行股票分析

4. **股票综合分析** (`/analyze`)
   - 对指定股票执行完整的综合分析，使用所有智能体

5. **比较多只股票** (`/compare`)
   - 比较多只股票的分析结果

6. **更新智能体配置** (`/agent/config`)
   - 更新指定智能体的配置参数
   - 注意：此功能在示例中默认注释，使用时请谨慎

## 自定义API客户端

您可以基于示例脚本中的 `StockAgentAPIClient` 类创建自己的API客户端，根据需要扩展功能或修改默认参数。

### 修改API基础URL

如果您的API服务运行在不同的地址，可以在创建客户端时指定基础URL：

```python
client = StockAgentAPIClient(base_url="http://your-server:port")
```

## 注意事项

- 请确保在调用API前，您的环境已正确配置，特别是相关的API密钥和依赖库
- 某些API调用（如综合分析、多股票比较）可能需要较长时间执行，请耐心等待
- 对于高频调用或大规模分析，请注意控制请求频率，避免系统过载
- 示例中使用的股票代码（如"AAPL"、"MSFT"）仅作演示，请根据您的实际需求修改

## 故障排除

如果遇到连接问题：

1. 确认API服务是否正在运行
2. 检查BASE_URL是否正确设置
3. 验证网络连接和防火墙设置
4. 查看API服务的日志，了解可能的错误原因